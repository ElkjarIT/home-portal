# ─────────────────────────────────────────────────────────────────────────────
# Immich worker node — environment variables
# Copy this file to .env and fill in the values that match your primary server.
# ─────────────────────────────────────────────────────────────────────────────

# Immich version — MUST match the tag running on your primary Immich server
# to avoid job-format or schema mismatches.
IMMICH_VERSION=release

# ─── Library mount ────────────────────────────────────────────────────────────
# Docker Desktop on Windows cannot pass WSL2 NFS/CIFS mounts into containers.
# Instead, create a Docker-native NFS volume ONCE before first start.
# This mounts the FULL /data/immich root so uploads, icloud, messages and all
# other asset paths match the primary server's container layout at /opt/immich.
#
# On the Proxmox VM, set up the NFS export first (one-time):
#   apt install nfs-kernel-server
#   echo '/data/immich *(rw,sync,no_subtree_check,no_root_squash,insecure)' >> /etc/exports
#   exportfs -ra
#
# Then on Chappie, create the Docker volume:
#   docker volume create --driver local --opt type=nfs \
#     --opt "o=addr=10.10.40.40,rw,nfsvers=4.1,rsize=1048576,wsize=1048576,hard,timeo=600,retrans=2,noresvport" \
#     --opt device=":/data/immich" \
#     immich-data
#
# The compose file references this volume as external (name: immich-data).
# No UPLOAD_LOCATION env var is needed.

# ─── Primary Immich database (Proxmox VM) ─────────────────────────────────────
DB_HOSTNAME=10.10.40.40
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=
DB_DATABASE_NAME=immich

# ─── Primary Immich Redis (Proxmox VM) ────────────────────────────────────────
REDIS_HOSTNAME=10.10.40.40
REDIS_PORT=6379

# ─── Timezone ─────────────────────────────────────────────────────────────────
TZ=Europe/Copenhagen
